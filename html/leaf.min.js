var Leaf=function(t){var e=this;this.provider=t||new Leaf.TimeProvider,window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var n=[],i=0,r=[],o={},a=function(t,e){return t.source.zIndex-e.source.zIndex},s=function(t){t._active=!1,t.source.onEnd(t),r.splice(r.indexOf(t),1),e.provider.biDirectional||(n.splice(n.indexOf(t),1),i=n.length)};this.setCanvas2d=function(t){o._2d={canvas:t,context:t.getContext("2d"),width:t.width,height:t.height}};var c=function(t,e,i){var r;r=e._controller?e._controller:new Leaf.Controller(e);for(var o=e.getChildren().length,a=0;o>a;a++){var h=e.getChildren()[a];c(t,h,r)}r.setInTime(t),i||r.onEnd(s),i?i.add(r):n.push(r)};this.add=function(t,r){var o=e.provider.getTime(!0)+t;if(r instanceof Array)for(var a=r.length,s=0;a>s;s++)c(o,r[s],null);else c(o,r,null);i=n.length},this.remove=function(t){var e=t._controller,i=n.indexOf(e),o=r.indexOf(e);return o>-1&&r.splice(o,1),i>-1&&n.splice(i,1),i>-1},this.render=function(){var t=e.provider.getTime();if(o._2d){var i=o._2d.context;i.setTransform(1,0,0,1,0,0),i.globalCompositeOperation="source-over",i.globalAlpha=1,i.fillStyle="rgb(0, 0, 0)",i.fillRect(0,0,window.innerWidth,window.innerHeight)}for(var s=0;s<n.length;s++){var c=n[s];c.inTime<=t&&c.outTime>t&&-1==r.indexOf(c)&&(r.push(c),c._active=!0)}r.sort(a);for(var h=r.length,s=0;h>s;s++)r[s].render(t,o)},this.logQueue=function(){console.log(n)}};Leaf.Version={version:"0.1",build:1,date:"2014-05-09T17:04:25.407Z"},Leaf.Animator=function(t){var e,n,i=100,r=t.length-1,o=0,a=t[0].value instanceof Array;if(a)var s=[],c=t[0].value.length;else var s;var h=function(t,e,n){return t+(e-t)*n},l=0;this.get=function(u){if(delta=u-l,delta>i&&(delta=0),0==r)return t[0].value;var f=0,p=t[0].time,d=!1;for(e=0;r>e;e++){var g=t[e],y=t[e+1];if(f+=g.time,p+=y.time,u>=f&&p>u){var v=(u-f)/(p-f);if(0>v&&(v=0),v>1&&(v=1),y.ease?v=y.ease(v):g.ease&&(v=g.ease(v)),a)for(n=0;c>n;n++)s[n]=h(g.value[n],y.value[n],v),y.amplitude&&(s[n]+=y.amplitude[n]*v);else s=h(g.value,y.value,v),y.amplitude&&(s+=y.amplitude*v);y.notify&&u>=p-delta&&(console.log("notify >",u+delta,p),y.notify()),o=e,d=!0;break}}return l=u,d?s:t[r].value}},Leaf.Color={array2Css:function(t){return 3==t.length?"rgb("+t[0]+","+t[1]+","+t[2]+")":"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},floatArray2Css:function(t){var e=Leaf.Color.f2i;return 3==t.length?"rgb("+e(t[0])+","+e(t[1])+","+e(t[2])+")":"rgba("+e(t[0])+","+e(t[1])+","+e(t[2])+","+e(t[3])+")"},f2i:function(t){return Math.round(255*t)},grey:function(t,e){return[t,t,t,null==e?1:e]}},Leaf.Controller=function(t){{var e,n=this;1e3*Math.random()|0}t._controller=this,this.source=t;var i={},r=0;for(var o in t){var a=t[o];if(a instanceof Leaf.Prop){var s=new Leaf.Animator(a.getSteps());r=Math.max(r,a.getDuration()),i[o]=s}}var c=[],h=0;this.add=function(){for(var t=arguments.length,e=0;t>e;e++){var n=arguments[e];if(c.indexOf(n)>-1)break;c.push(n),r=Math.max(r,n.getDuration())}h=c.length},this.getDuration=function(){return r},this.setInTime=function(t){n.inTime=t,n.outTime=n.inTime+r,n.accPauseTime=0,n.paused=!1,l=0};var l=0;this.render=function(o,a){n.paused&&(l||(l=o),n.accPauseTime+=o-l,l=o);var s=o-(n.inTime+n.accPauseTime);t.physicsEnabled?t.setupTransformPhysics(s,a,i):t.setupTransform(s,a,i),t.render(s,a,i);for(var u=0;h>u;u++)c[u].render(o,a);t.clearTransform(s,a,i),s>=r&&e&&setTimeout(e,0,n)},this.onEnd=function(t){e=t}},Leaf.Ease={linear:function(t){return t},smoothstep:function(t){return t*t*(3-2*t)},quadIn:function(t){return t*t},quadOut:function(t){return t*(2-t)},quadInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},sineIn:function(t){return 1-Math.cos(t*Math.PI/2)},sineOut:function(t){return Math.sin(t*Math.PI/2)},sineInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},oscillate:function(t,e,n){if(0!=t){var i=1/t;return e=e||1,function(t){var r=n?n(t):t,o=r/i%1;return Math.sin(o*Math.PI*2)*e}}return function(){var t=(new Date).getTime()%e/e;return Math.sin(t*Math.PI*2)}},combine:function(t,e){return function(n){var i=t(n)+e(n);return i}},noise:function(t,e){return function(n){var i=Math.random()*t;return e?e(n)*i:i}},constant:function(t){var e,n,i=(new Date).getTime(),r=0;return function(){return e=(new Date).getTime(),n=e-i,i=e,r+=t/n}}},Leaf.Layout=new function(){var t=this;this.centerX=function(){return.5*window.innerWidth},this.centerY=function(){return.5*window.innerHeight},this.setCenter=function(e){e.position.init(t.centerX(),t.centerY())},this.setAtPercent=function(e,n,i){e.position.init(t.wp(n),t.hp(i))},this.wp=function(t){return t/100*window.innerWidth},this.hp=function(t){return t/100*window.innerHeight},this.widthPercent=function(t){return t/100*window.innerWidth},this.heightPercent=function(t){return t/100*window.innerHeight},this.bestPercent=function(e){return window.innerWidth>window.innerHeight?t.heightPercent(e):t.widthPercent(e)}},Leaf.Loader={loadText:function(t,e){var n=new XMLHttpRequest;n.open("GET",t),n.onreadystatechange=function(){4==n.readyState&&e.call(null,n.responseText)},n.send()},loadJSON:function(t,e){Leaf.Loader.loadText(t,function(t){e(JSON.parse(t))})},loadSVG:function(t,e){Leaf.Loader.loadText(t,function(t){var n=document.createElement("svg");n.innerHTML=t,e(n)})},loadImage:function(t,e){var n=new Image;n.onload=e(n),n.src=t}},Leaf.Object2d=function(){this.position=p_(0,0),this.rotation=p_(0),this.scale=p_(1,1),this.alpha=p_(1),this.zIndex=0,this.physicsEnabled=!1;var t=[];this.add=function(){for(var e=arguments.length,n=0;e>n;n++){var i=arguments[n];t.push(i)}},this.getChildren=function(){return t}},Leaf.Object2d.prototype.enablePhysics=function(t,e){this.force=p_(0,0),this.gravity=0,this.friction=1,this.velocity=[0,0],this.position=[t,e],this.physicsEnabled=!0},Leaf.Object2d.prototype.setupTransform=function(t,e,n){var i,r,o,a,s;i=e._2d.context,r=n.position.get(t),o=n.rotation.get(t),a=n.scale.get(t),s=n.alpha.get(t),i.save(),i.translate(r[0],r[1]),i.rotate(o),i.scale(a[0],a[1]),i.globalAlpha=s,this.currentPosition=r},Leaf.Object2d.prototype.setupTransformPhysics=function(t,e,n){var i,r,o,a;i=e._2d.context,r=n.force.get(t),a=n.rotation.get(t),o=n.scale.get(t),this.velocity[0]+=r[0],this.velocity[1]+=r[1]+this.gravity,this.velocity[0]*=this.friction,this.velocity[1]*=this.friction,this.position[0]+=this.velocity[0],this.position[1]+=this.velocity[1],i.save(),i.translate(this.position[0],this.position[1]),i.rotate(a),i.scale(o[0],o[1])},Leaf.Object2d.prototype.render=function(t,e,n){e._2d.context;this.draw(t,e,n)},Leaf.Object2d.prototype.clearTransform=function(t,e){var n=e._2d.context;n.restore()},Leaf.Object2d.prototype.pause=function(t){this._controller&&(this._controller.paused=t)},Leaf.Object2d.prototype.onEnd=function(){},Leaf.Prop=function(t){var e=[{time:0,value:t}],n=0,i=0,r=0;this.init=function(){var t=arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments);return e[0].value=t,this},this.getSteps=function(){return e},this.to=function(){var t=arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments);return e.push({value:t}),n=e.length-1,this},this.by=function(){for(var t=arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments),i=e[e.length-1].value,r=0;r<t.length;r++)t[r]+=i[r];return e.push({value:t}),n=e.length-1,this},this.amp=function(){var t=arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments),n=e[e.length-1];return n.amplitude=t,this},this.wait=function(t){return r+=t,e.push({time:t,value:e[e.length-1].value}),n=e.length-1,this},this.in=function(t,n){r+=t;var i=e[e.length-1];return i.time=t,i.ease=n||Leaf.Ease.linear,this},this.notify=function(t,n){var i=e[e.length-1];return i.notify=t,i.notifArgs=n,this},this.beginBlock=function(){return i=n,this},this.repeatBlock=function(t){for(var o=0;t-1>o;o++)for(j=i;n>=j;j++)r+=e[j].time,e.push(e[j]);return n=e.length-1,i=0,this},this.getDuration=function(){return r}};var p_=function(){var t=Array.prototype.slice.call(arguments);return new Leaf.Prop(t)};Leaf.SVG=function(t){var e=t.querySelector("svg");this.width=parseInt(e.getAttribute("width")),this.height=parseInt(e.getAttribute("height")),this.extractPaths=function(){for(var e=t.querySelectorAll("path"),n=[],i=0;i<e.length;i++){for(var r=new Leaf.PathCoord,o=e[i].pathSegList,a=0,s=0,c=0,h=o.numberOfItems;h>c;c++){var l=o.getItem(c);switch(l.pathSegTypeAsLetter){case"m":a+=l.x,s+=l.y,r.moveTo(a,s);break;case"M":a=l.x,s=l.y,r.moveTo(a,s);break;case"l":0!=l.x&&0!=l.y&&(a+=l.x,s+=l.y,r.lineTo(a,s));break;case"L":a=l.x,s=l.y,r.lineTo(l.x,l.y);break;case"z":case"Z":r.close();break;case"c":var u=a+l.x1,f=s+l.y1,p=a+l.x2,d=s+l.y2;a+=l.x,s+=l.y,r.curveTo(u,f,p,d,a,s);break;case"C":a=l.x,s=l.y,r.curveTo(l.x1,l.y1,l.x2,l.y2,l.x,l.y);break;case"s":var g=r.getLastSegment(),u=g.x-(g.x1-g.x),f=g.y-(g.y1-g.y),p=a+l.x2,d=s+l.y2;a+=l.x,s+=l.y,r.curveTo(u,f,p,d,a,s);break;case"S":var g=r.getLastSegment(),u=g.x-(g.x1-g.x),f=g.y-(g.y1-g.y);a+=l.x,s+=l.y,r.curveTo(l.x1,l.y1,l.x2,l.y2,l.x,l.y)}}n.push(r)}return n}},Leaf.TimeProvider=function(){var t,e=function(){return(new Date).getTime()},n=this,i=e(),r=0,o=0,a=0,s=0;this.timeScale=1,this.biDirectional=!1,this.paused=!1;var c=250;this.setBPM=function(e,n){a=6e4/e,t=n,s=0},this.reset=function(){i=e(),r=0,o=0},this.getTime=function(h){var l=e()-i,u=n.paused||l>c;if(u&&(o+=l),i=e(),u||(r+=l*n.timeScale),a&&!h){var f=r/a,p=parseInt(0|f);p>s&&(t(s,-1*(f-p)),s=p)}return r}},Object.size=function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n},V2={},V2.add=function(t,e,n){return n=n||t,n[0]=t[0]+e[0],n[1]=t[1]+e[1],n},V2.sub=function(t,e,n){return n=n||t,n[0]=t[0]-e[0],n[1]=t[1]-e[1],n},V2.mul=function(t,e,n){return n=n||t,n[0]=t[0]*e,n[1]=t[1]*e,n},V2.neg=function(t,e){return e=e||t,e[0]=-1*t[0],e[1]=-1*t[1],e},V2.norm=function(t,e){e=e||t;var n=V2.mag(t);return 0==n?t:(e[0]=t[0]/n,e[1]=t[1]/n,e)},V2.magSq=function(t){return t[0]*t[0]+t[1]*t[1]},V2.mag=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},V2.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},V2.distance=function(t,e){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))},V2.distanceSqrt=function(t,e){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])},Leaf.Curve=function(t){Leaf.Object2d.call(this);this.name="line",this.startPoint=p_(0,0),this.controlPointA=p_(0,0),this.controlPointB=p_(0,0),this.endPoint=p_(0,0),this.progress=p_(0,1),this.width=p_(1),this.color=p_.apply(null,t||[1,1,1,1]);var e,n,i,r,o,a,s,c,h,l,u,f,p,d,g,y,v,m,L=function(t,L,b,w,x,T,_,P,O,A,S){e=1-L,n=1-b,i=w*e*e+2*T*L*e+P*L*L,r=w*n*n+2*T*b*n+P*b*b,o=T*e*e+2*P*L*e+A*L*L,a=T*n*n+2*P*b*n+A*b*b,s=x*e*e+2*_*L*e+O*L*L,c=x*n*n+2*_*b*n+O*b*b,h=_*e*e+2*O*L*e+S*L*L,l=_*n*n+2*O*b*n+S*b*b,u=i*e+o*L,f=i*n+o*b,p=r*e+a*L,d=r*n+a*b,g=s*e+h*L,y=s*n+h*b,v=c*e+l*L,m=c*n+l*b,t.moveTo(u,g),t.bezierCurveTo(f,y,p,v,d,m)};this.draw=function(t,e,n){var i,r,o,a,s,c,h,l;i=e._2d.context,r=n.width.get(t),o=n.color.get(t),a=n.startPoint.get(t),h=n.controlPointA.get(t),l=n.controlPointB.get(t),s=n.endPoint.get(t),c=n.progress.get(t),i.globalAlpha=o[3],i.strokeStyle=Leaf.Color.floatArray2Css(o),i.lineWidth=r,i.lineJoin="round",i.beginPath(),0==c[0]&&1==c[1]?(i.moveTo(a[0],a[1]),i.bezierCurveTo(h[0],h[1],l[0],l[1],s[0],s[1])):L(i,c[0],c[1],a[0],a[1],h[0],h[1],l[0],l[1],s[0],s[1]),i.stroke()}},Leaf.Curve.prototype=new Leaf.Object2d,Leaf.Curve.prototype.constructor=Leaf.Object2d,Leaf.Element=function(t){this.position=p_(0,0),this.rotation=p_(0),this.scale=p_(1,1),this.alpha=p_(1),this.physicsEnabled=!1,this.applyTransform=function(e,n,i,r,o,a){t.style.opacity=a;var s="translate3d("+e+"px,"+n+"px, 0px) scale("+r+","+o+") rotate("+i+"rad)";t.style.webkitTransform=s},this.getChildren=function(){return[]}},Leaf.Element.prototype.enablePhysics=function(t,e){this.force=p_(0,0),this.gravity=0,this.friction=1,this.velocity=[0,0],this.position=[t,e],this.physicsEnabled=!0},Leaf.Element.prototype.setupTransform=function(t,e,n){var i,r,o,a;i=n.position.get(t),r=n.rotation.get(t),o=n.scale.get(t),a=n.alpha.get(t),this.applyTransform(i[0],i[1],r,o[0],o[1],a)},Leaf.Element.prototype.setupTransformPhysics=function(t,e,n){var i,r,o;i=n.force.get(t),o=n.rotation.get(t),r=n.scale.get(t),a=n.alpha.get(t),this.velocity[0]+=i[0],this.velocity[1]+=i[1]+this.gravity,this.velocity[0]*=this.friction,this.velocity[1]*=this.friction,this.position[0]+=this.velocity[0],this.position[1]+=this.velocity[1],this.applyTransform(this.position[0],this.position[1],o,r[0],r[1],a)},Leaf.Element.prototype.render=function(){},Leaf.Element.prototype.clearTransform=function(){},Leaf.Element.prototype.pause=function(t){this._controller&&(this._controller.paused=t)},Leaf.Element.prototype.onEnd=function(){},Leaf.Empty=function(){Leaf.Object2d.call(this);2*Math.PI;this.name="empty",this.draw=function(){}},Leaf.Empty.prototype=new Leaf.Object2d,Leaf.Empty.prototype.constructor=Leaf.Object2d,Leaf.Image=function(t){Leaf.Object2d.call(this);var e,n,i,r=this,o=!1;if(t instanceof Image)e=t,o=!0,n=e.width,i=e.height;else{var a=function(){o=!0,n=e.width,i=e.height};e=new Image,e.addEventListener("load",a),e.src=t}this.draw=function(t,a,s){var c;o&&(c=a._2d.context,r.drawMask&&r.drawMask(t,a,s),c.drawImage(e,n*-.5,i*-.5))}},Leaf.Image.prototype=new Leaf.Object2d,Leaf.Image.prototype.constructor=Leaf.Object2d,Leaf.Line=function(t){Leaf.Object2d.call(this);var e=[0,0];this.name="line",this.startPoint=p_(0,0),this.endPoint=p_(0,0),this.progress=p_(0,1),this.width=p_(1),this.color=p_.apply(null,t||[1,1,1,1]),this.draw=function(t,n,i){var r,o,a,s,c,h;r=n._2d.context,o=i.width.get(t),a=i.color.get(t),s=i.startPoint.get(t),c=i.endPoint.get(t),h=i.progress.get(t),r.globalAlpha=a[3],r.strokeStyle=Leaf.Color.floatArray2Css(a),r.lineWidth=o,r.beginPath(),V2.sub(c,s,e),V2.mul(e,h[0]),V2.add(s,e,e),r.moveTo(e[0],e[1]),V2.sub(c,s,e),V2.mul(e,h[1]),V2.add(s,e,e),r.lineTo(e[0],e[1]),r.stroke()}},Leaf.Line.prototype=new Leaf.Object2d,Leaf.Line.prototype.constructor=Leaf.Object2d,Leaf.PathCoord=function(){var t=[],e=this;this.numSegments=0,this.setPageSize=function(t,e){this.pageWidth=t,this.pageHeight=e},this.moveTo=function(e,n){t.push({type:"m",x:e,y:n})},this.curveTo=function(n,i,r,o,a,s){t.push({type:"c",x1:n,y1:i,x2:r,y2:o,x:a,y:s}),e.numSegments++},this.lineTo=function(n,i){t.push({type:"l",x:n,y:i}),e.numSegments++},this.close=function(){var n=t[0];t.push({type:"z",x:n.x,y:n.y}),e.numSegments++},this.getSegment=function(e){return t[e]},this.getLastSegment=function(){return t[t.length-1]},this.segments=function(){return t},this.mul=function(e){for(var n=0;n<t.length;n++){var i=t[n];i.x&&(i.x*=e),i.y&&(i.y*=e),i.x1&&(i.x1*=e),i.y1&&(i.y1*=e),i.x2&&(i.x2*=e),i.y2&&(i.y2*=e)}return this}},Leaf.Path=function(t,e){Leaf.Object2d.call(this);this.name="path",this.progress=p_(0,1),this.width=p_(1),this.color=p_.apply(null,t||[1,1,1,1]);var n,i,r,o,a,s,c,h,l,u,f,p,d,g,y,v,m,L,b=function(t,e,b,w,x,T,_,P,O,A,S){n=1-e,i=1-b,r=w*n*n+2*T*e*n+P*e*e,o=w*i*i+2*T*b*i+P*b*b,a=T*n*n+2*P*e*n+A*e*e,s=T*i*i+2*P*b*i+A*b*b,c=x*n*n+2*_*e*n+O*e*e,h=x*i*i+2*_*b*i+O*b*b,l=_*n*n+2*O*e*n+S*e*e,u=_*i*i+2*O*b*i+S*b*b,f=r*n+a*e,p=r*i+a*b,d=o*n+s*e,g=o*i+s*b,y=c*n+l*e,v=c*i+l*b,m=h*n+u*e,L=h*i+u*b,0!=e&&t.moveTo(f,y),t.bezierCurveTo(p,v,d,m,g,L)},w=function(t,e,n,i,r,o,a){var s=o-i,c=a-r;0!=e&&t.moveTo(i+s*e,r+c*e),t.lineTo(i+s*n,r+c*n)};this.draw=function(t,n,i){var r,o,a,s,c,h;o=n._2d.context,a=i.width.get(t),s=i.color.get(t),h=i.progress.get(t),o.globalAlpha=s[3],o.strokeStyle=Leaf.Color.floatArray2Css(s),o.lineWidth=a,o.lineJoin="round",o.lineCap="round",o.beginPath();var l,u,f,p,d=h[0]*e.numSegments,g=h[1]*e.numSegments,y=0;for(r=0;r<e.segments().length;r++){var c=e.getSegment(r);switch(c.type){case"m":o.moveTo(c.x,c.y);break;case"c":if(y>=d&&g>=y+1)o.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,c.x,c.y);else if(d>=y&&y+1>=d||g>=y&&y+1>=g){var l=0,u=1;d>=y&&y+1>=d&&(l=d-y),g>=y&&y+1>=g&&(u=g-y),b(o,l,u,f,p,c.x1,c.y1,c.x2,c.y2,c.x,c.y)}y++;break;case"l":case"z":if(y>=d&&g>=y+1)o.lineTo(c.x,c.y);else if(d>=y&&y+1>=d||g>=y&&y+1>=g){var l=0,u=1;d>=y&&y+1>=d&&(l=d-y),g>=y&&y+1>=g&&(u=g-y),w(o,l,u,f,p,c.x,c.y)}y++}f=c.x,p=c.y}o.stroke()}},Leaf.Path.prototype=new Leaf.Object2d,Leaf.Path.prototype.constructor=Leaf.Object2d,Leaf.Pie=function(t){Leaf.Object2d.call(this);this.name="pie",this.radius=p_(100),this.thickness=p_(20),this.startAngle=p_(0),this.endAngle=p_(2*Math.PI),this.color=p_.apply(null,t||[1,1,1,1]),this.draw=function(t,e,n){var i,r,o,a,s,c;i=e._2d.context,r=n.radius.get(t)[0],o=n.thickness.get(t)[0]+r,a=n.color.get(t),s=n.startAngle.get(t)[0],c=n.endAngle.get(t)[0];var h=c>s;i.globalAlpha=a[3];var l=Leaf.Color.floatArray2Css(a);i.fillStyle=l,i.strokeStyle=l,i.beginPath(),h?(i.arc(0,0,r,s,c),i.lineTo(Math.cos(c)*o,Math.sin(c)*o),i.arc(0,0,o,c,s,!0),i.lineTo(Math.cos(s)*r,Math.sin(s)*r)):(i.arc(0,0,r,c,s),i.lineTo(Math.cos(s)*o,Math.sin(s)*o),i.arc(0,0,o,s,c,!0),i.lineTo(Math.cos(c)*r,Math.sin(c)*r)),i.fill()}},Leaf.Pie.prototype=new Leaf.Object2d,Leaf.Pie.prototype.constructor=Leaf.Object2d,Leaf.Polygon=function(t,e){Leaf.Object2d.call(this);this.name="poly",this.mask=!1;for(var n=1;t>=n;n++)this["p"+n]=p_(0,0);this.color=p_.apply(null,e||[1,1,1,1]),this.draw=function(e,n,i){var r,o,a;r=n._2d.context,o=i.color.get(e),r.globalAlpha=o[3],r.fillStyle=Leaf.Color.floatArray2Css(o),r.beginPath();for(var s=1;t>=s;s++)a=i["p"+s].get(e),0==s?r.moveTo(a[0],a[1]):r.lineTo(a[0],a[1]);r.fill()}},Leaf.Polygon.prototype=new Leaf.Object2d,Leaf.Polygon.prototype.constructor=Leaf.Object2d,Leaf.Rectangle=function(t,e,n){Leaf.Object2d.call(this);this.name="rect",this.width=p_(t||100),this.height=p_(e||100),this.color=p_.apply(null,n||[1,1,1,1]),this.draw=function(t,e,n){var i,r,o,a;i=e._2d.context,r=n.width.get(t),o=n.height.get(t),a=n.color.get(t),i.globalAlpha=a[3],i.fillStyle=Leaf.Color.floatArray2Css(a),i.fillRect(r*-.5,o*-.5,r,o)}},Leaf.Rectangle.prototype=new Leaf.Object2d,Leaf.Rectangle.prototype.constructor=Leaf.Object2d,Leaf.Sphere=function(t){Leaf.Object2d.call(this);var e=this,n=2*Math.PI;this.stroke=!1,this.dash=!1,this.strokeSize=p_(1),this.mask=!1,this.name="sphere",this.radius=p_(100),this.color=p_.apply(null,t||[1,1,1,1]),this.draw=function(t,i,r){var o,a,s,c;if(o=i._2d.context,a=r.radius.get(t),s=r.color.get(t),c=r.strokeSize.get(t)[0],e.dash){var h=2*Math.PI*a,l=h/e.dash;o.setLineDash([l])}o.globalAlpha=s[3],o.lineWidth=c,e.stroke?o.strokeStyle=Leaf.Color.floatArray2Css(s):o.fillStyle=Leaf.Color.floatArray2Css(s),o.beginPath(),o.arc(0,0,a,0,n),e.stroke?o.stroke():o.fill()}},Leaf.Sphere.prototype=new Leaf.Object2d,Leaf.Sphere.prototype.constructor=Leaf.Object2d;